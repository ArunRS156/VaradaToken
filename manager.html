
<!DOCTYPE html>
<html>
<head>
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <style>
Â  Â  body { font-family: sans-serif; background: #fdf2e9; padding: 10px; margin: 0; }
Â  Â  .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 12px; border-top: 5px solid #27ae60; position: relative; }
Â  Â  #loginArea { text-align: center; max-width: 350px; margin: 100px auto; }
Â  Â  .table-wrapper { overflow-x: auto; margin-top: 20px; }
Â  Â  table { width: 100%; border-collapse: collapse; font-size: 12px; }
Â  Â  th { background: #27ae60; color: white; padding: 10px; text-align: left; }
Â  Â  td { padding: 8px; border-bottom: 1px solid #eee; }
Â  Â  #settingsPanel { background: #f4f4f4; padding: 15px; border-radius: 8px; margin-bottom: 20px; display: none; }
Â  Â  input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; margin-bottom: 10px; box-sizing: border-box; }
Â  Â  .btn { padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; margin-right: 5px; }
Â  Â  .btn-green { background: #27ae60; } .btn-blue { background: #2980b9; } .btn-red { background: #e74c3c; position: absolute; top: 10px; right: 10px; }
Â  </style>
</head>
<body>
Â  <div id="loginArea" class="container">
Â  Â  <h2>Admin Login</h2>
Â  Â  <input type="password" id="passInput" placeholder="Password">
Â  Â  <button class="btn btn-green" style="width:100%" onclick="checkPass()">Login</button>
Â  </div>
Â  <div id="dashArea" class="container" style="display:none;">
Â  Â  <button class="btn btn-red" onclick="logout()">Logout</button>
Â  Â  <h2>Admin Dashboard</h2>
Â  Â  <button class="btn btn-blue" onclick="toggleSettings()">âš™ï¸ Settings & Gap</button>
Â  Â  <button class="btn btn-green" onclick="loadData()">ğŸ”„ Refresh Data</button>
Â  Â  <div id="settingsPanel">
Â  Â  Â  <label>Date</label><input type="text" id="adminDate">
Â  Â  Â  <label>Time</label><input type="text" id="adminTime">
Â  Â  Â  <label>Gap (Mins)</label><input type="number" id="adminInterval">
Â  Â  Â  <button class="btn btn-green" onclick="updateAdmin()">Save</button>
Â  Â  </div>
Â  Â  <div class="table-wrapper">
Â  Â  Â  <table>
Â  Â  Â  Â  <thead><tr><th>Token</th><th>Name</th><th>Mobile</th><th>Persons</th><th>Time</th><th>UTR</th></tr></thead>
Â  Â  Â  Â  <tbody id="dataTableBody"></tbody>
Â  Â  Â  </table>
Â  Â  </div>
Â  </div>
Â  <script>
Â  Â  if(sessionStorage.getItem("auth") === "true") showDash();
Â  Â  function checkPass() { if(document.getElementById('passInput').value === "Varada@123") { sessionStorage.setItem("auth", "true"); showDash(); } else alert("Wrong!"); }
Â  Â  function showDash() { document.getElementById('loginArea').style.display = 'none'; document.getElementById('dashArea').style.display = 'block'; loadData(); loadSettings(); }
Â  Â  function toggleSettings() { const p = document.getElementById('settingsPanel'); p.style.display = p.style.display === 'none' ? 'block' : 'none'; }
Â  Â  function loadSettings() { google.script.run.withSuccessHandler(d => { document.getElementById('adminDate').value = d.date; document.getElementById('adminTime').value = d.time; document.getElementById('adminInterval').value = d.interval; }).getSettings(); }
Â  Â  function loadData() { google.script.run.withSuccessHandler(data => { let html = ""; data.forEach(r => { html += `<tr><td><b>${r[5]}</b></td><td>${r[1]}</td><td>${r[2]}</td><td>${r[7]}</td><td>${r[6]}</td><td>${r[8]}</td></tr>`; }); document.getElementById('dataTableBody').innerHTML = html; }).getPaymentData(); }
Â  Â  function updateAdmin() { const d = { date: document.getElementById('adminDate').value, time: document.getElementById('adminTime').value, interval: document.getElementById('adminInterval').value }; google.script.run.withSuccessHandler(() => { alert("Saved!"); toggleSettings(); }).saveSettings(d); }
Â  Â  function logout() { sessionStorage.removeItem("auth"); location.reload(); }
Â  </script>
</body>
</html>
